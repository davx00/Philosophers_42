# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: despanol <despanol@student.42madrid.com    +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2025/06/29 12:21:10 by despanol          #+#    #+#              #
#    Updated: 2025/07/04 21:12:19 by despanol         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

NAME = philo
CC = gcc
#SANITIZEF =-fsanitize=thread
CFLAGS = -Wall -Werror -Wextra -pthread -g -I.
SRCS = ./src/checker.c \
       ./src/eat.c \
       ./src/eat_aux.c \
       ./src/main.c \
       ./src/manager.c \
       ./src/utils.c \
	   ./src/main_aux.c \
	   ./src/eat_aux_aux.c \

OBJS = $(SRCS:.c=.o)
HEADER = ./sch/philosophers.h

all: $(NAME)

$(NAME): $(OBJS)
	@echo "...... .. ......... .. .....  . ..:.~!77!!~~!JJJ7!!!JGGY7!!77??7: .  .. ......... .. ......... .. ."
	@echo ".........................  .:^!7777!~?57J~.....:^?^  .^JY?: ..^JP55J!^:............................."
	@echo "...................... .:~7?JY?7^.... ::.!~..... .?~.. .::?7... .^YJY77!!^.. ......................."
	@echo "................. .   ^??~:~7!  ...^7.... ~!^: .. .J.... ..J7. .. ..^7 .~~!!~:  ...................."
	@echo "............... .::~5P5^. ^J7!..... !^ ....?:7:... !~ ......77~:.... 7~ :~:.~??^  .................."
	@echo "...............^!YPP#?. . J?7 ......:? ... !~:7 ...::.......!J~7.....:! ..~.  ^JY!. ................"
	@echo "........... .^?7?7:J: ^: ^YJ:........J.....:~ :..............~^^7 ... 7^ ..!..  ^JY~  .............."
	@echo "......... .~J!~?^ !! .Y: !?! .......:J....... !...............::? ... !! . ~!7..  :YJ:.............."
	@echo "........ ^J?.~?^. ?^ ~7 ..~^~...... ^7 .......!:................J.....:7....!^:~^.:^YJ77: .........."
	@echo "....... !Y^ !J7~. ?^ 7^ ....J.......7^........!:............... 7~ .. .~:.::^^^~~^::...:Y~   ......."
	@echo "...... JP.!^!!~.. ~! ?:.....J.......~^!...... !^ ............ ...:::^~:~!~^^:.....:::!7!PJ^~^:.. ..."
	@echo "..... ?#.5Y.:J:?...~.Y.....^? .... ~~Y~ ......:?......  ...:^~!!^~~^^:.....:^^^^^^^.!??!~~:::^:!7:.."
	@echo ".... ^@J7B! ~?~7 ... J: .. 7~......?^#! ...... ~! ..:^~!!!!!~^:..  ...^~~~~^:::^~~~YY7^^^77: .. !P:."
	@echo ".... 7@!PJ: ^7~! ... ?^....J:.? .. ~:G? .  ...^^!!77!~^:..   .:.^~~~:.:..  :!!~~^::5#@!  ~:7. ^~ 7P."
	@echo ".... ?@~5Y! :7:? ....^7 .. 7! ?:...  !J::^~!!!!~^:.   ..:^~~~~^.::. .:^!JJ?J~.   ^J5B@~ .?:.. ^7 :#:"
	@echo ".... J@^^Y.....?: ... !! ...?:^7 .:^~!!!~~^..  ..:^^~~~~^^:...:^^~JPBB?!^?5  . ^?5GB#7 ^?~ .^!7:^P5."
	@echo ".....B#7^J .!:.^J..... 7~ ..:J77!!~~^:    .:^~~~~~^::.    .~77!~^~~?#^   5^.. ?PJY7?^ 7J: :J^!Y7JP7."
	@echo "... !@!Y!J :?.. !7.. ...7!!77!~:.  ...:^~~~^::...  .:^^:~Y5?^.  .  ?G. . Y^ . JYP:.Y7.5.. ~?.&?.. ~J"
	@echo "... ~@~.JG..?... ~~^~77!~^:.   .:~~~^:::... ..   ^?7~^!#@Y: ..:7~77PY7~: ^7. . ~?^!!BJ?.  .!7YPY^ !Y"
	@echo ".....#Y  !J ~~:~7?7!^:..  .:^^~~~^.... .. ...:~!Y5^ .?GBY ... ?^YY .!7!~^^YG!^^^:~JPGGYJ!~^:::^~!77."
	@echo ".... ?#^  ?5777~^.   ..:^~!~^:... ......:~~!!?JPG.  7YP5^.... !!^Y^  .!B!~~^:^^^^^~~?J~7YYP5B7!!^. ."
	@echo "......G@J5PY:    .:^~!~^:.. .  . ..:^~~~~^:77!:~Y . Y^JY7 .....~!7J!!7PY    .:^~!7!!!7!!?!J~P^  ...."
	@echo ".....:GY!:. .~7!!!~^:. .   ..:^!?!!~^:..  57 !. J^  !?^BG7    .^~~~!7J5^..^~!!~^~7YYGPGYJ7^:G^ ....."
	@echo "......??J?JYJ?~:.     .:^!?JJ?!^:...  .^^?&!:.^.:J5. ::P~PP7!~^~77777~. .?!:.  ^YYY5PY?P##7^5......."
	@echo "...... ^GG:.   ..:~7?JYJ?7~:..:^.^~..!7!^~7JYYJ: .#! ^J7 !Y5G?&57~:.. .. .  :!7YPYY5BBP77~:?! ......"
	@echo "....... :PY^~?YP555?!^^^^~!!~~^::~:7G7~5Y5Y5Y!?J .J:~!. .:~5: P^ ......:~~!7JJ?7?G#&&55:.. Y! ......"
	@echo "........ ?@5?7~^::^:.~^^:. .~!7YPBB@Y B? .^GP5 5~ ^7!:....!. 7Y........^JJJG?^:..PB@P:.... 75 ......"
	@echo ".........:5?!7!!!~:..:^~!7JPB@&5GJP&:!P ..:.!Y J777: ..   .^??..........77.^:.^^^75YY? .....J^ ....."
	@echo "......... :#?^!!??YPGPYJ7!~:.P@^57BJ 5~.. :!B~.P?! .. :!?5PJ^ ..........^?^ ....~JP5Y:......:J......"
	@echo ".......... ^YPPY?~?YJ?     . ^@?Y?#7.B: :J?G?~Y7?...^PP5G77^~. ......... .7^:...!BP^. ...... ~! ...."
	@echo "........... :5J:: ~J!Y ...... 5#:.JB.?J.~@^!JY75Y. .#@??5^~:5Y:............^^:^^~~.:......... 7^ ..."
	@echo "............:5P?Y ::~J ...... ~@7 .PG^!J7J55?B55J7^ 7PY7???J5&~ ................  .?......... :J...."
	@echo "........... ~J57Y . !J ........#J . !5J^~Y^^^5&YYJY7:..:~~!!J?.................... !^ ........ !? .."
	@echo "........... J5?77 . J7 ...:....#! .. .!YP~7. ..!P!?55YJJJJ?7^ .....................~:  .........J^ ."
	@echo ".......... !B! 5^. ^P...?.J:...G^.....  JP:    !&: !7~7BP^.. ..................... !~!!^.........J:."
	@echo "......... ^G~ JY  :Y^...5:5.. !B.......  JGJ775G7..Y: JPY:. .......................J..:^. .   .. ^Y."
	@echo "........ ^5: ?G. ^J^ ..?7^J ..#G.......:5GY!!?:.?^.:. !JJ?!^.................... .5P^:755YJ???^ .:P^"
	@echo ".........Y:.JG^ .!. . ^!.Y: .JG5 ..... Y?Y: ~7  ?!  ...J7!7J:~:.................^5@&P5Y~::~YJY?!77^."
	@echo "....... ~?7PJ. .. .....:5~ ~J~JG.......G!?^7.: ..7~:. ..!!~7~7~^:.............:!77~^~^~   5~ ..... ."
	@echo "....... !BJ: ........ ^Y^.!7.:@5 ..... 7?~ ~^ ^^:.:!!!^. :!7!~!^ ............~~.   .7~..^.!?........"
	@echo "...... ~#J ....... .^?!. .. :B#:........!7~^:..:~7~..:~!^  :?::?:  ^:..... ~7..:.::!Y~!!!7~G~ ......"
	@echo "......^#7 ....... ^7!:.... ~#&~ ........ :~!?YJ~..~J. ..?!. ^7 ^?!^~7:... !5. !! 7Y!&PYJJPJ: ......."
	@echo "..... 57 ...... .77: .... ?&#^ ........... 7GPBG?. 77 . ~J .?~ . :~J7!!^.^#J:^?~ ^##7:  .5^ ........"
	@echo ".....^P .......:?^ .. :!~PB5: .............&P^^7?. 7Y  .PJ~7JJ.... :5..!PYJ5!7^??.~G :YY?Y~........."
	@echo ".... 7? .......?: .. ~7?#G?............... ?J~^^.:?#?~7Y57~..Y:   .!?. ^@? :J7?!G!!G?~@?. .........."
	@echo ".... ?~...... 7~ .. !?~#P!..................~?GYJ&?:^7J. ^?PG!~~!YJ^  :5GY~. .:~Y#B57!G. ..........."
	@echo ".... J~ .....:Y... ~J PP? .................. ^&^?#  .75J:.:^^^~!5B5YJ5&#~7YY?~:  ?&^ .^5J:.........."
	@echo ".... ~? .....:Y ...J.7J5:..:. ................P~:B~   :!!!!!~^. ..5P~!G~7?Y#5P^^ ?@^.. ~PY?: ......."
	@echo "..... ?^ .....Y~. !7:P!J .:^~~. ..............:J~^?7^^:^^^~^.^^. .P^ .?!..:?G7:!5&? ....PJ7?........"
	@echo "......:J..... 7@J J7~YY^.....^?^ ...............!77JJJJJY5YY?^ J7 ^7!. Y:...^7577J~ .. 7P7?J ......."
	@echo "...... ~?. ....B# 75!JJ ..... .?^ ................:^~~?YJ755BJ Y@Y^^~^JJ ...  7?~^ . :7Y~Y?7 ......."
	@echo "....... ~J:... P#.YP75:.........7: .........:...... . Y?^~7^~^7#?#PG?5~^?.... 75. ..!7~?GYP^........"
	@echo "........ ~Y....B&:B@P^ ..........7..........7~ .......^J7??!5~?5 J5! .^ ?~ ...^...:B!!B5Y?#G:......."
	@echo "......... P^..:&B5@5. .......... ^7..........7!..........55 ?~ ^: ~7!~:.?~...:^.. .YPPPY?:#@! ......"
	@echo "........ .5.  !@BY^ ..............Y^......... !?........ ?7  !!. .  .^~7P. .:^?PP!~!!7JJ?B@B: ......"
	@echo "...... .~Y! :?B7:  .............. !~ ......... ^?^ .......7~. ^!!^^!!~: ^J:.^^~!BJJ5?7?PP!~#7 ......"
	@echo "... .~7?!^~YPJ: .................................7~........!7~^:^^!~~~??:^Y.   ^: :P~J^Y~7 75 ......"
	@echo ".. !J!^7JY?~. ....................................^!^. ......:7P!!5B:  ~5:BY7~^^~77:.!~7. .Y! ......"
	@echo ". 7Y~JY7^.  ...................................... .~!^. .... ~Y. :B! .?&Y::!77!~^....J~ !GY^......."
	@echo " .BJ7^            .. .. ..     ........  ........... :~!~^.... !5?77775&&?::^^!?!~^~~55:J5~:?! ....."
	@echo ":5P~~!7?JYYYYJ?!~~^^^^^^^^~~~!7?7777?JJ7~:::...  ..... .:^..... :!!JB~::!!^^^^~!7?^ .:~GJ   ~! ....."
	@echo "^5YJJ??7!~~^^^^^^^^~~~!!~~~~^:::.......:^~~!!!!~~::....   . .....   ^77!~~!~~~. .!B^.  ?5~~!!......."
	@echo ".          ...... .      .  .............. ...::~~~!!!~~~^^^::......  ..757?Y~J.. 5P.:^775!. ......."
	@echo "................................................ .. ...::^^~~~~~~~!!!!!J&~ !?.^..~BJ~~^:~7 ........."
	@echo " ...... .. ......... .. ......... .. ......... .. ...... .. .. ....:.:^^!?!~~7?YYYPJ??!!^ ..... .. ."
	@echo "    ██████╗ ██╗  ██╗██╗██╗      ██████╗ ███████╗ ██████╗ ██████╗ ██╗  ██╗███████╗██████╗ ███████╗"
	@echo "    ██╔══██╗██║  ██║██║██║     ██╔═══██╗██╔════╝██╔═══██╗██╔══██╗██║  ██║██╔════╝██╔══██╗██╔════╝"
	@echo "    ██████╔╝███████║██║██║     ██║   ██║███████╗██║   ██║██████╔╝███████║█████╗  ██████╔╝███████╗"
	@echo "    ██╔═══╝ ██╔══██║██║██║     ██║   ██║╚════██║██║   ██║██╔═══╝ ██╔══██║██╔══╝  ██╔══██╗╚════██║"
	@echo "    ██║     ██║  ██║██║███████╗╚██████╔╝███████║╚██████╔╝██║     ██║  ██║███████╗██║  ██║███████║"
	@echo "    ╚═╝     ╚═╝  ╚═╝╚═╝╚══════╝ ╚═════╝ ╚══════╝ ╚═════╝ ╚═╝     ╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝╚══════╝"
	@echo ""
	@echo ""
	$(CC) $(CFLAGS) $(OBJS) -o $(NAME)
	@echo ""
	@echo "Compilation successful! Executable: $(NAME)"

%.o: %.c $(HEADER)
	$(CC) $(CFLAGS) -c $< -o $@

clean:
	rm -f $(OBJS)

fclean: clean
	rm -f $(NAME)

re: fclean all

.PHONY: all clean fclean re

#$(CC) $(CFLAGS) $(SANITIZEF) $(OBJS) -o $(NAME)